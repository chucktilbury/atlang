<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Alang: /home/chuck/Src/alang/src/memory.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Alang
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('memory_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">memory.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="common_8h_source.html">common.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for memory.c:</div>
<div class="dyncontent">
<div class="center"><img src="memory_8c__incl.png" border="0" usemap="#_2home_2chuck_2_src_2alang_2src_2memory_8c" alt=""/></div>
<map name="_2home_2chuck_2_src_2alang_2src_2memory_8c" id="_2home_2chuck_2_src_2alang_2src_2memory_8c">
<area shape="rect" id="node2" href="common_8h.html" title="common.h" alt="" coords="370,95,453,121"/>
<area shape="rect" id="node11" href="errors_8h.html" title="errors.h" alt="" coords="95,169,162,196"/>
<area shape="rect" id="node12" href="memory_8h.html" title="memory.h" alt="" coords="747,169,827,196"/>
</map>
</div>
</div>
<p><a href="memory_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:aafeaed567f2a4ac9f1c159769d7b1be9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memory_8c.html#aafeaed567f2a4ac9f1c159769d7b1be9">SEG_MASK</a>&#160;&#160;&#160;0xFFFF00000000</td></tr>
<tr class="separator:aafeaed567f2a4ac9f1c159769d7b1be9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82f387c3f3e0e97fb7efd6ae4b8100b6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memory_8c.html#a82f387c3f3e0e97fb7efd6ae4b8100b6">GET_SEG</a>(p)&#160;&#160;&#160;(((uint64_t)p)&amp;<a class="el" href="memory_8c.html#aafeaed567f2a4ac9f1c159769d7b1be9">SEG_MASK</a>)</td></tr>
<tr class="separator:a82f387c3f3e0e97fb7efd6ae4b8100b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ad0bbdbb6c098b4227028e3f2a0f13770"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memory_8c.html#ad0bbdbb6c098b4227028e3f2a0f13770">init_memory</a> ()</td></tr>
<tr class="separator:ad0bbdbb6c098b4227028e3f2a0f13770"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a484f4ca5923a9372a00c2c64216cc1cf"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memory_8c.html#a484f4ca5923a9372a00c2c64216cc1cf">memory_calloc</a> (const char *file, const char *func, int line, size_t num, size_t size)</td></tr>
<tr class="separator:a484f4ca5923a9372a00c2c64216cc1cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca11b1d49831f217f673d73c328e5704"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memory_8c.html#aca11b1d49831f217f673d73c328e5704">memory_malloc</a> (const char *file, const char *func, int line, size_t size)</td></tr>
<tr class="separator:aca11b1d49831f217f673d73c328e5704"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d1b4f00b86ccc46f5e3cc9348912c2f"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memory_8c.html#a4d1b4f00b86ccc46f5e3cc9348912c2f">memory_realloc</a> (const char *file, const char *func, int line, void *ptr, size_t size)</td></tr>
<tr class="separator:a4d1b4f00b86ccc46f5e3cc9348912c2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b82d34fec521ae8b81fb4c95479bbcc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memory_8c.html#a9b82d34fec521ae8b81fb4c95479bbcc">memory_free</a> (const char *file, const char *func, int line, void *ptr)</td></tr>
<tr class="separator:a9b82d34fec521ae8b81fb4c95479bbcc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b35572f751b50eef956a2d054ee48c0"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memory_8c.html#a5b35572f751b50eef956a2d054ee48c0">strdup</a> (const char *)</td></tr>
<tr class="separator:a5b35572f751b50eef956a2d054ee48c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27e7e6d18bdd3e06e9fe716a4b8c96f8"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memory_8c.html#a27e7e6d18bdd3e06e9fe716a4b8c96f8">memory_strdup</a> (const char *file, const char *func, int line, const char *str)</td></tr>
<tr class="separator:a27e7e6d18bdd3e06e9fe716a4b8c96f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:aeb223aaa265a04f7feef27aea34fcc73"><td class="memItemLeft" align="right" valign="top">static uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="memory_8c.html#aeb223aaa265a04f7feef27aea34fcc73">mem_segment</a></td></tr>
<tr class="separator:aeb223aaa265a04f7feef27aea34fcc73"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This is a simple wrapper around the memory allocation routines to make error handling easier. All memory allocation errors are fatal errors.</p>
<p>I considered adding garbage collection to this compiler. But I kept running into the question of why? This program runs one time and when it ends, the memory it has allocated is freed by the system. Any memory leak would have to be catastrophic to matter. So, the runtime of the output will have GC, but not the compiler.</p>
<p>What this code does need is a way to check if proper cleanup is happening. The reason that is needed is to verify that allocated memory is actually getting used for something. A little like checking for unused parameters to a function, but for allocated memory. (low priority to implement)</p>
<p>To that end, a list of allocate memory needs to be kept, along with file names and line numbers so that when the program ends, what memory that has been allocated, but not freed, can be dumped.</p>
<p>Reference links: <a href="https://maplant.com/gc.html">https://maplant.com/gc.html</a> <a href="https://github.com/mkirchner/gc">https://github.com/mkirchner/gc</a> </p>

<p class="definition">Definition in file <a class="el" href="memory_8c_source.html">memory.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a82f387c3f3e0e97fb7efd6ae4b8100b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a82f387c3f3e0e97fb7efd6ae4b8100b6">&#9670;&nbsp;</a></span>GET_SEG</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GET_SEG</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">p</td><td>)</td>
          <td>&#160;&#160;&#160;(((uint64_t)p)&amp;<a class="el" href="memory_8c.html#aafeaed567f2a4ac9f1c159769d7b1be9">SEG_MASK</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="memory_8c_source.html#l00031">31</a> of file <a class="el" href="memory_8c_source.html">memory.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="memory_8c_source.html#l00033">init_memory()</a>, and <a class="el" href="memory_8c_source.html#l00065">memory_free()</a>.</p>

</div>
</div>
<a id="aafeaed567f2a4ac9f1c159769d7b1be9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aafeaed567f2a4ac9f1c159769d7b1be9">&#9670;&nbsp;</a></span>SEG_MASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SEG_MASK&#160;&#160;&#160;0xFFFF00000000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="memory_8c_source.html#l00030">30</a> of file <a class="el" href="memory_8c_source.html">memory.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ad0bbdbb6c098b4227028e3f2a0f13770"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad0bbdbb6c098b4227028e3f2a0f13770">&#9670;&nbsp;</a></span>init_memory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void init_memory </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="memory_8c_source.html#l00033">33</a> of file <a class="el" href="memory_8c_source.html">memory.c</a>.</p>

<p class="reference">References <a class="el" href="memory_8c_source.html#l00031">GET_SEG</a>, and <a class="el" href="memory_8c_source.html#l00029">mem_segment</a>.</p>

<p class="reference">Referenced by <a class="el" href="alang_8c_source.html#l00014">init_things()</a>.</p>
<div class="fragment"><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;                   {</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    <span class="comment">// int stackvar;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    <span class="keywordtype">void</span>* ptr = malloc(1);</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    <span class="comment">// fprintf(stderr, &quot;stk=%p, mal=%p, glo=%p\n&quot;, &amp;stackvar, ptr, &amp;mem_segment);</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    <a class="code" href="memory_8c.html#aeb223aaa265a04f7feef27aea34fcc73">mem_segment</a> = <a class="code" href="memory_8c.html#a82f387c3f3e0e97fb7efd6ae4b8100b6">GET_SEG</a>(ptr);</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    free(ptr);</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;}</div><div class="ttc" id="memory_8c_html_a82f387c3f3e0e97fb7efd6ae4b8100b6"><div class="ttname"><a href="memory_8c.html#a82f387c3f3e0e97fb7efd6ae4b8100b6">GET_SEG</a></div><div class="ttdeci">#define GET_SEG(p)</div><div class="ttdef"><b>Definition:</b> <a href="memory_8c_source.html#l00031">memory.c:31</a></div></div>
<div class="ttc" id="memory_8c_html_aeb223aaa265a04f7feef27aea34fcc73"><div class="ttname"><a href="memory_8c.html#aeb223aaa265a04f7feef27aea34fcc73">mem_segment</a></div><div class="ttdeci">static uint64_t mem_segment</div><div class="ttdef"><b>Definition:</b> <a href="memory_8c_source.html#l00029">memory.c:29</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="memory_8c_ad0bbdbb6c098b4227028e3f2a0f13770_icgraph.png" border="0" usemap="#memory_8c_ad0bbdbb6c098b4227028e3f2a0f13770_icgraph" alt=""/></div>
<map name="memory_8c_ad0bbdbb6c098b4227028e3f2a0f13770_icgraph" id="memory_8c_ad0bbdbb6c098b4227028e3f2a0f13770_icgraph">
<area shape="rect" id="node2" href="alang_8c.html#ab934a38436204282275cc48bfe923e24" title="init_things" alt="" coords="147,100,228,127"/>
<area shape="rect" id="node3" href="alang_8c.html#a3c04138a5bfe5d72780bb7e82a18e627" title="main" alt="" coords="276,73,327,100"/>
<area shape="rect" id="node4" href="configure_8h.html#a770fa765eb6cca34ef710e37f505eda4" title="show_use" alt="" coords="375,68,456,95"/>
<area shape="rect" id="node5" href="configure_8c.html#a308850e33e2d2bef1a59e7cca78a1a85" title="check_required" alt="" coords="504,5,615,32"/>
<area shape="rect" id="node6" href="configure_8h.html#a4740d76c61b01b73341afb129f9cec4d" title="configure" alt="" coords="663,68,737,95"/>
</map>
</div>

</div>
</div>
<a id="a484f4ca5923a9372a00c2c64216cc1cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a484f4ca5923a9372a00c2c64216cc1cf">&#9670;&nbsp;</a></span>memory_calloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* memory_calloc </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>line</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="memory_8c_source.html#l00042">42</a> of file <a class="el" href="memory_8c_source.html">memory.c</a>.</p>

<p class="reference">References <a class="el" href="errors_8h_source.html#l00025">LOC_ASSERT</a>.</p>
<div class="fragment"><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;                                                                                           {</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <span class="keywordtype">void</span>* ptr = calloc(num, size);</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <a class="code" href="errors_8h.html#af54653019d723df332cda3d35e8ecafa">LOC_ASSERT</a>(file, func, line, ptr != NULL, <span class="stringliteral">&quot;cannot calloc %lu bytes\n&quot;</span>, num*size);</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <span class="keywordflow">return</span> ptr;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;}</div><div class="ttc" id="errors_8h_html_af54653019d723df332cda3d35e8ecafa"><div class="ttname"><a href="errors_8h.html#af54653019d723df332cda3d35e8ecafa">LOC_ASSERT</a></div><div class="ttdeci">#define LOC_ASSERT(fi, fu, li, expr, msg,...)</div><div class="ttdef"><b>Definition:</b> <a href="errors_8h_source.html#l00025">errors.h:25</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9b82d34fec521ae8b81fb4c95479bbcc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b82d34fec521ae8b81fb4c95479bbcc">&#9670;&nbsp;</a></span>memory_free()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void memory_free </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>line</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ptr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="memory_8c_source.html#l00065">65</a> of file <a class="el" href="memory_8c_source.html">memory.c</a>.</p>

<p class="reference">References <a class="el" href="errors_8c_source.html#l00069">fatal_error()</a>, <a class="el" href="memory_8c_source.html#l00031">GET_SEG</a>, <a class="el" href="memory_8c_source.html#l00029">mem_segment</a>, and <a class="el" href="memory_8c.html#a5b35572f751b50eef956a2d054ee48c0">strdup()</a>.</p>
<div class="fragment"><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;                                                                          {</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="memory_8c.html#aeb223aaa265a04f7feef27aea34fcc73">mem_segment</a> != <a class="code" href="memory_8c.html#a82f387c3f3e0e97fb7efd6ae4b8100b6">GET_SEG</a>(ptr))</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        <a class="code" href="errors_8c.html#ad63debbcb45dc20a7ae0922186fee10b">fatal_error</a>(<span class="stringliteral">&quot;%s: %s:%d assert failed: Attempt to free a pointer that was not allocated: %p\n&quot;</span>, file, func, line, ptr);</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        free(ptr);</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;}</div><div class="ttc" id="memory_8c_html_a82f387c3f3e0e97fb7efd6ae4b8100b6"><div class="ttname"><a href="memory_8c.html#a82f387c3f3e0e97fb7efd6ae4b8100b6">GET_SEG</a></div><div class="ttdeci">#define GET_SEG(p)</div><div class="ttdef"><b>Definition:</b> <a href="memory_8c_source.html#l00031">memory.c:31</a></div></div>
<div class="ttc" id="memory_8c_html_aeb223aaa265a04f7feef27aea34fcc73"><div class="ttname"><a href="memory_8c.html#aeb223aaa265a04f7feef27aea34fcc73">mem_segment</a></div><div class="ttdeci">static uint64_t mem_segment</div><div class="ttdef"><b>Definition:</b> <a href="memory_8c_source.html#l00029">memory.c:29</a></div></div>
<div class="ttc" id="errors_8c_html_ad63debbcb45dc20a7ae0922186fee10b"><div class="ttname"><a href="errors_8c.html#ad63debbcb45dc20a7ae0922186fee10b">fatal_error</a></div><div class="ttdeci">void fatal_error(const char *str,...)</div><div class="ttdef"><b>Definition:</b> <a href="errors_8c_source.html#l00069">errors.c:69</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="memory_8c_a9b82d34fec521ae8b81fb4c95479bbcc_cgraph.png" border="0" usemap="#memory_8c_a9b82d34fec521ae8b81fb4c95479bbcc_cgraph" alt=""/></div>
<map name="memory_8c_a9b82d34fec521ae8b81fb4c95479bbcc_cgraph" id="memory_8c_a9b82d34fec521ae8b81fb4c95479bbcc_cgraph">
<area shape="rect" id="node2" href="errors_8c.html#ad63debbcb45dc20a7ae0922186fee10b" title="fatal_error" alt="" coords="152,5,232,32"/>
<area shape="rect" id="node3" href="memory_8c.html#a5b35572f751b50eef956a2d054ee48c0" title="strdup" alt="" coords="163,56,221,83"/>
</map>
</div>

</div>
</div>
<a id="aca11b1d49831f217f673d73c328e5704"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca11b1d49831f217f673d73c328e5704">&#9670;&nbsp;</a></span>memory_malloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* memory_malloc </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>line</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="memory_8c_source.html#l00049">49</a> of file <a class="el" href="memory_8c_source.html">memory.c</a>.</p>

<p class="reference">References <a class="el" href="errors_8h_source.html#l00025">LOC_ASSERT</a>.</p>
<div class="fragment"><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;                                                                               {</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <span class="keywordtype">void</span>* ptr = malloc(size);</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <a class="code" href="errors_8h.html#af54653019d723df332cda3d35e8ecafa">LOC_ASSERT</a>(file, func, line, ptr != NULL, <span class="stringliteral">&quot;cannot malloc %lu bytes\n&quot;</span>, size);</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <span class="keywordflow">return</span> ptr;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;}</div><div class="ttc" id="errors_8h_html_af54653019d723df332cda3d35e8ecafa"><div class="ttname"><a href="errors_8h.html#af54653019d723df332cda3d35e8ecafa">LOC_ASSERT</a></div><div class="ttdeci">#define LOC_ASSERT(fi, fu, li, expr, msg,...)</div><div class="ttdef"><b>Definition:</b> <a href="errors_8h_source.html#l00025">errors.h:25</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4d1b4f00b86ccc46f5e3cc9348912c2f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d1b4f00b86ccc46f5e3cc9348912c2f">&#9670;&nbsp;</a></span>memory_realloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* memory_realloc </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>line</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="memory_8c_source.html#l00057">57</a> of file <a class="el" href="memory_8c_source.html">memory.c</a>.</p>

<p class="reference">References <a class="el" href="errors_8h_source.html#l00025">LOC_ASSERT</a>.</p>
<div class="fragment"><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;                                                                                           {</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <span class="keywordtype">void</span>* nptr = realloc(ptr, size);</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <a class="code" href="errors_8h.html#af54653019d723df332cda3d35e8ecafa">LOC_ASSERT</a>(file, func, line, nptr != NULL, <span class="stringliteral">&quot;cannot reallocate %lu bytes\n&quot;</span>, size);</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <span class="keywordflow">return</span> nptr;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;}</div><div class="ttc" id="errors_8h_html_af54653019d723df332cda3d35e8ecafa"><div class="ttname"><a href="errors_8h.html#af54653019d723df332cda3d35e8ecafa">LOC_ASSERT</a></div><div class="ttdeci">#define LOC_ASSERT(fi, fu, li, expr, msg,...)</div><div class="ttdef"><b>Definition:</b> <a href="errors_8h_source.html#l00025">errors.h:25</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a27e7e6d18bdd3e06e9fe716a4b8c96f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27e7e6d18bdd3e06e9fe716a4b8c96f8">&#9670;&nbsp;</a></span>memory_strdup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* memory_strdup </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>line</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>str</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="memory_8c_source.html#l00076">76</a> of file <a class="el" href="memory_8c_source.html">memory.c</a>.</p>

<p class="reference">References <a class="el" href="errors_8h_source.html#l00025">LOC_ASSERT</a>, and <a class="el" href="memory_8c.html#a5b35572f751b50eef956a2d054ee48c0">strdup()</a>.</p>
<div class="fragment"><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;                                                                                   {</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="keywordtype">char</span>* nptr = <a class="code" href="memory_8c.html#a5b35572f751b50eef956a2d054ee48c0">strdup</a>(str);</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <a class="code" href="errors_8h.html#af54653019d723df332cda3d35e8ecafa">LOC_ASSERT</a>(file, func, line, nptr != NULL, <span class="stringliteral">&quot;cannot strdup %lu bytes\n&quot;</span>, strlen(str));</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="keywordflow">return</span> nptr;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;}</div><div class="ttc" id="errors_8h_html_af54653019d723df332cda3d35e8ecafa"><div class="ttname"><a href="errors_8h.html#af54653019d723df332cda3d35e8ecafa">LOC_ASSERT</a></div><div class="ttdeci">#define LOC_ASSERT(fi, fu, li, expr, msg,...)</div><div class="ttdef"><b>Definition:</b> <a href="errors_8h_source.html#l00025">errors.h:25</a></div></div>
<div class="ttc" id="memory_8c_html_a5b35572f751b50eef956a2d054ee48c0"><div class="ttname"><a href="memory_8c.html#a5b35572f751b50eef956a2d054ee48c0">strdup</a></div><div class="ttdeci">char * strdup(const char *)</div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="memory_8c_a27e7e6d18bdd3e06e9fe716a4b8c96f8_cgraph.png" border="0" usemap="#memory_8c_a27e7e6d18bdd3e06e9fe716a4b8c96f8_cgraph" alt=""/></div>
<map name="memory_8c_a27e7e6d18bdd3e06e9fe716a4b8c96f8_cgraph" id="memory_8c_a27e7e6d18bdd3e06e9fe716a4b8c96f8_cgraph">
<area shape="rect" id="node2" href="memory_8c.html#a5b35572f751b50eef956a2d054ee48c0" title="strdup" alt="" coords="165,5,224,32"/>
</map>
</div>

</div>
</div>
<a id="a5b35572f751b50eef956a2d054ee48c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5b35572f751b50eef956a2d054ee48c0">&#9670;&nbsp;</a></span>strdup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* strdup </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="memory_8c_source.html#l00065">memory_free()</a>, and <a class="el" href="memory_8c_source.html#l00076">memory_strdup()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="memory_8c_a5b35572f751b50eef956a2d054ee48c0_icgraph.png" border="0" usemap="#memory_8c_a5b35572f751b50eef956a2d054ee48c0_icgraph" alt=""/></div>
<map name="memory_8c_a5b35572f751b50eef956a2d054ee48c0_icgraph" id="memory_8c_a5b35572f751b50eef956a2d054ee48c0_icgraph">
<area shape="rect" id="node2" href="memory_8h.html#ae1dce6c65baa03f23603e134643a3775" title="memory_free" alt="" coords="119,5,217,32"/>
<area shape="rect" id="node3" href="memory_8h.html#a12bd0db6d33f942feead7564ab6c26d1" title="memory_strdup" alt="" coords="112,56,224,83"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="aeb223aaa265a04f7feef27aea34fcc73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb223aaa265a04f7feef27aea34fcc73">&#9670;&nbsp;</a></span>mem_segment</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t mem_segment</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="memory_8c_source.html#l00029">29</a> of file <a class="el" href="memory_8c_source.html">memory.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="memory_8c_source.html#l00033">init_memory()</a>, and <a class="el" href="memory_8c_source.html#l00065">memory_free()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="memory_8c.html">memory.c</a></li>
    <li class="footer">Generated on Sun Mar 21 2021 00:20:06 for Alang by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
